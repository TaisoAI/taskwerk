# TaskWerk Workflow Rules

This file defines workflow rules and development hygiene enforcement for TaskWerk.
Rules are applied differently based on whether tasks are handled by AI agents or humans.

## AI Agent Workflow Rules

When AI agents (Claude Code, Cursor, etc.) take on tasks, the following rules are enforced:

### Required Workflow Phases
- **plan**: Create implementation plan and identify requirements
- **implement**: Write the actual code following project standards
- **test**: Write and run tests to ensure functionality works correctly
- **document**: Add documentation, comments, and usage examples

### Quality Gates
- **Tests Required**: Yes
- **Tests Must Pass**: Yes
- **Documentation Required**: Yes
- **Linting Required**: Yes
- **Type Checking Required**: Yes

### Commit Rules
- **Auto Commit**: Disabled
- **Require All Phases**: Yes
- **Version Bump Required**: Yes
- **Auto Version Bump**: Enabled
- **Version Bump Type**: patch
- **Auto Stage Files**: Enabled
- **All Tests Must Pass**: Required before any commit
- **Co-Authorship Required**: All commits must include proper Co-Authored-By tags for collaboration
- **Build Validation**: All targets must build successfully before commit

### Timeouts
- **Max Task Duration**: 4h
- **Phase Timeout**: 30m

## Human Workflow Rules

When humans manage tasks manually, workflow enforcement is minimal:

- **Workflow Enforcement**: Disabled
- **Required Phases**: None
- **Quality Gates**: None enforced

## Configuration

To customize these rules:

1. Edit this file directly
2. Modify `.taskrc.json` configuration
3. Use `taskwerk rules` command to manage rules interactively

## Workflow Phases

### Plan
- Create implementation plan
- Identify dependencies and requirements
- Estimate complexity and timeline

### Implement
- Write the actual code
- Follow project coding standards
- Implement error handling

### Test
- Write unit tests for new functionality
- Ensure all tests pass
- Achieve required coverage thresholds

### Document
- Add/update docstrings and comments
- Update README if needed
- Create usage examples

## Quality Gates Details

### Tests Required
When enabled, all new functionality must include tests:
- Unit tests for functions/methods
- Integration tests for complex workflows
- Edge case coverage

### Documentation Required
When enabled, all new functionality must include:
- Function/method docstrings
- Usage examples
- Updated README sections if applicable

### Linting Required
When enabled, code must pass:
- ESLint checks (JavaScript/TypeScript)
- Prettier formatting
- Project-specific linting rules

### Type Checking Required
When enabled, code must pass:
- TypeScript type checking
- JSDoc type annotations (JavaScript)
- No `any` types without justification

## Workflow Automation

TaskWerk can automate version management and git operations based on workflow rules:

### Version Bumping
- **Automatic**: Version is bumped automatically when tasks are completed in AI mode
- **Types**: patch (0.1.0 → 0.1.1), minor (0.1.0 → 0.2.0), major (0.1.0 → 1.0.0)
- **Manual Override**: Use `--version-impact` flag to override automatic detection

### Auto-Staging
- **Automatic**: Changed files are automatically staged for commit
- **Scope**: Includes modified files and new untracked files
- **Manual Override**: Use `--auto-stage` flag to force staging

### Auto-Commit
- **Automatic**: Creates commits automatically after task completion
- **Message Format**: Follows conventional commit format with task details
- **Manual Override**: Use `--auto-commit` flag to force commits

### Commit Message Format
All commits must follow this format:
```
Subject line (imperative mood, < 72 chars)

Optional body explaining what and why vs. how.

Co-Authored-By: User Name <user@email.com>
Co-Authored-By: Claude <noreply@anthropic.com>
```

**Required elements:**
- Clear, descriptive subject line
- Co-authored tags for all contributors
- No "Generated by" lines (authorship is in Co-Authored-By tags)

### Integration Commands
```bash
# Complete task with full automation
taskwerk complete TASK-001 --auto-stage --auto-commit

# Complete with specific version bump
taskwerk complete TASK-001 --version-impact minor --auto-commit

# Force automation in human mode
taskwerk complete TASK-001 --auto-stage --auto-commit --force
```

---

*This file was generated by TaskWerk. You can edit it manually or use `taskwerk rules` to modify settings.*
